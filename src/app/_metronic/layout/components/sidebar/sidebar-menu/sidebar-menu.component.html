<!--begin::Menu wrapper-->
<div id="kt_app_sidebar_menu_scroll" class="scroll-y my-5 mx-3" data-kt-scroll="true" data-kt-scroll-activate="true" data-kt-scroll-height="auto" data-kt-scroll-dependencies="#kt_app_sidebar_logo, #kt_app_sidebar_footer" data-kt-scroll-wrappers="#kt_app_sidebar_menu" data-kt-scroll-offset="5px" data-kt-scroll-save-state="true">
  <!--begin::Menu-->
  <div class="menu menu-column menu-rounded menu-sub-indention fw-semibold fs-6" id="#kt_app_sidebar_menu" data-kt-menu="true" data-kt-menu-expand="false">
    <!-- Dashboard -->
    <div class="menu-item">
      <a class="menu-link without-sub" routerLink="/dashboard" routerLinkActive="active">
        <span class="menu-icon">
          <app-keenicon name="graph-4" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title" translate="MENU.DASHBOARD"></span>
      </a>
    </div>

    
    
    <div class="menu-item" *ngIf="isRole()">
      <div class="menu-content pt-8 pb-2">
        <span class="menu-section text-muted text-uppercase fs-8 ls-1">Configuraciones</span>
      </div>
    </div>

    <div class="menu-item menu-accordion" *ngIf="isRole()" data-kt-menu-trigger="click" routerLinkActive="here show">
      <span class="menu-link">
        <span class="menu-icon">
          <app-keenicon name="setting-3" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title" data-link="/configuraciones">Principal
        </span>
        <span class="menu-arrow"></span>
      </span>
      <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
        <div class="menu-item">
          <a class="menu-link without-sub" routerLinkActive="active" routerLink="/configuraciones/sucursales/list">
            <span
              class="menu-bullet">
              <span class="bullet bullet-dot"></span>
            </span>
            <span class="menu-title">Sucursales
            </span>
          </a>
        </div>
        
        <div class="menu-item">
          <a class="menu-link without-sub" routerLinkActive="active" routerLink="/configuraciones/metodo-de-pagos/list">
            <span
              class="menu-bullet">
              <span class="bullet bullet-dot"></span>
            </span>
            <span class="menu-title">Metodo de pago
            </span>
          </a>
        </div>
        <div class="menu-item">
          <a class="menu-link without-sub" routerLinkActive="active" routerLink="/configuraciones/segmento-de-cliente/list">
            <span
              class="menu-bullet">
              <span class="bullet bullet-dot"></span>
            </span>
            <span class="menu-title">Segmento de Cliente
            </span>
          </a>
        </div>
          

      </div>
    </div>

    <!-- Separator -->
    <div class="menu-item" *ngIf="showMenu(['register_role','edit_role']) || showMenu(['register_user','edit_user'])">
      <div class="menu-content pt-8 pb-2">
        <span class="menu-section text-muted text-uppercase fs-8 ls-1">Roles y Accesos</span>
      </div>
    </div>

    <!-- Pages -->
    <div class="menu-item" *ngIf="showMenu(['register_role','edit_role'])">
      <a class="menu-link without-sub" routerLink="/roles/list" routerLinkActive="active">
        <span class="menu-icon">
          <app-keenicon name="people" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title">Roles</span>
      </a>
    </div>
    <!-- Customers -->
    <div class="menu-item menu-accordion" *ngIf="showMenu(['register_user','edit_user'])" data-kt-menu-trigger="click" routerLinkActive="here show">
      <span class="menu-link">
        <span class="menu-icon">
          <app-keenicon name="profile-user" class="fs-2"></app-keenicon>
        </span>
        <span class="menu-title" data-link="/usuarios">Gesti√≥n Usuarios
        </span>
        <span class="menu-arrow"></span>
      </span>
      <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
        <div class="menu-item">
          <a class="menu-link without-sub" routerLinkActive="active" routerLink="/usuarios/list">
            <span
              class="menu-bullet">
              <span class="bullet bullet-dot"></span>
            </span>
            <span class="menu-title">Lista
            </span>
          </a>
        </div>

      </div>
    </div>


    <!-- TAREAS -->
    <div class="menu-item" *ngIf="showMenu(['register_task','edit_task']) || showMenu(['register_documents','edit_documents'])">
      <div class="menu-content pt-8 pb-2">
        <span class="menu-section text-muted text-uppercase fs-8 ls-1" style="font-weight: 900;">Corporativo</span>
      </div>
    </div>

    <!-- üè¢ ESPACIOS DE TRABAJO -->
    <div class="menu-item menu-accordion" *ngIf="showMenu(['register_task','edit_task'])" data-kt-menu-trigger="click" routerLinkActive="here show">
      <span class="menu-link">
        <span class="menu-icon">
          <i class="fa-solid fa-list-check"></i>
        </span>
        <span class="menu-title" data-link="/tasks/workspaces">Tareas</span>
        <span class="menu-arrow"></span>
      </span>
      
      <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
        
        <!-- ‚úÖ VISTA GENERAL (nueva opci√≥n principal) -->
        <div class="menu-item">
          <a 
            class="menu-link without-sub" 
            routerLinkActive="active" 
            routerLink="/tasks/workspaces/list"
          >
            <span class="menu-bullet">
              <i class="fa-solid fa-house">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </span>
            <span class="menu-title"> Vista General</span>
          </a>
        </div>

        <!-- üì§ GRUPOS COMPARTIDOS (nueva secci√≥n) -->
        <div class="menu-item">
          <a 
            class="menu-link without-sub" 
            routerLinkActive="active" 
            routerLink="/tasks/workspaces/shared"
          >
            <span class="menu-bullet">
              <i class="fa-solid fa-share-nodes">
                <span class="path1"></span>
                <span class="path2"></span>
              </i>
            </span>
            <span class="menu-title"> Grupos Compartidos</span>
          </a>
        </div>

        <div class="separator my-2"></div>
        
        <!-- üìã Loading state -->
        <div *ngIf="loadingWorkspaces" class="menu-item">
          <div class="menu-link px-3">
            <span class="spinner-border spinner-border-sm me-2"></span>
            <span class="text-muted">Cargando...</span>
          </div>
        </div>

        <!-- ‚≠ê Listado de Workspaces creados por el usuario -->
        <div *ngFor="let workspace of workspaces" class="menu-item">
          <a 
            class="menu-link without-sub" 
            routerLinkActive="active" 
            [routerLink]="['/tasks/grupos', workspace.id]"
          >
            <span class="menu-bullet">
              <i class="fa-solid fa-users-rectangle" [style.color]="workspace.color || '#6366f1'"></i>
            </span>
            <span class="menu-title d-flex align-items-center gap-2">
              {{ workspace.name }}
            </span>
          </a>
        </div>

      </div>
    </div>

    <!-- DOCUMENTOS -->
    <div class="menu-item menu-accordion" *ngIf="showMenu(['register_documents','edit_documents'])" data-kt-menu-trigger="click" routerLinkActive="here show">
      <span class="menu-link">
        <span class="menu-icon">
          <i class="fa-solid fa-folder-open"></i>
        </span>
        <span class="menu-title" data-link="/documents">Documentos
        </span>
        <span class="menu-arrow"></span>
      </span>
      <div class="menu-sub menu-sub-accordion" routerLinkActive="menu-active-bg">
        <div class="menu-item">
          <a class="menu-link without-sub" routerLinkActive="active" routerLink="/documents/documentos/list">
            <span
              class="menu-bullet">
              <span class="bullet bullet-dot"></span>
            </span>
            <span class="menu-title">Crear Documentos
            </span>
          </a>
        </div>
      </div>
    </div>
  </div>
</div>