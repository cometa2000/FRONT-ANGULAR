<!--begin::Notifications-->
<div class="app-navbar-item" [ngClass]="itemClass">
  <!--begin::Menu wrapper-->
  <div 
    [ngClass]="btnClass" 
    data-kt-menu-trigger="{default: 'click', lg: 'hover'}" 
    data-kt-menu-attach="parent"
    data-kt-menu-placement="bottom-end"
    class="position-relative"
  >
    <app-keenicon name="notification-status" class="fs-2"></app-keenicon>
    
    <!-- Badge con contador de notificaciones no leídas -->
    <span 
      *ngIf="unreadCount > 0"
      class="badge badge-circle badge-danger position-absolute translate-middle top-0 start-100 h-15px w-15px d-flex align-items-center justify-content-center fs-9 animation-blink"
    >
      {{ unreadCount > 9 ? '9+' : unreadCount }}
    </span>
  </div>
  <app-notifications-inner></app-notifications-inner>
  <!--end::Menu wrapper-->
</div>
<!--end::Notifications-->

<!--begin::Chat-->
<!-- <div class="app-navbar-item" [ngClass]="itemClass">
  <div [ngClass]="btnClass" class="position-relative" id="kt_drawer_chat_toggle">
    <app-keenicon name="message-text-2" class="fs-2"></app-keenicon>
    <span
      class="bullet bullet-dot bg-success h-6px w-6px position-absolute translate-middle top-0 start-50 animation-blink">
    </span>
  </div>
</div> -->
<!--end::Chat-->

<!--begin::Theme mode-->
<div class="app-navbar-item" [ngClass]="itemClass">

  <!-- Botón del tema sin deformación -->
  <div
    class="btn btn-icon btn-custom btn-active-light-primary w-35px h-35px"
    data-kt-menu-trigger="{default: 'click', lg: 'hover'}"
    data-kt-menu-attach="parent"
    data-kt-menu-placement="bottom-end"
  >
    <ng-container *ngIf="mode$ | async as mode">
      <app-keenicon
        [name]="mode === 'dark' ? 'moon' : 'night-day'"
        class="fs-2"
      ></app-keenicon>
    </ng-container>
  </div>

  <!-- Menú de selección -->
  <div
    class="menu menu-sub menu-sub-dropdown menu-column menu-rounded menu-title-gray-700 
           menu-icon-muted menu-active-bg menu-state-primary fw-semibold py-4 fs-base w-175px"
    data-kt-menu="true"
  >

    <ng-container *ngIf="menuMode$ | async as menu">

      <!-- Light -->
      <div class="menu-item px-3 my-0">
        <a class="menu-link px-3 py-2"
           [ngClass]="{'active': menu === 'light'}"
           (click)="switchTheme('light')">
          <span class="menu-icon">
            <app-keenicon name="night-day" class="fs-3"></app-keenicon>
          </span>
          <span class="menu-title">Light</span>
        </a>
      </div>

      <!-- Dark -->
      <div class="menu-item px-3 my-0">
        <a class="menu-link px-3 py-2"
           [ngClass]="{'active': menu === 'dark'}"
           (click)="switchTheme('dark')">
          <span class="menu-icon">
            <app-keenicon name="moon" class="fs-3"></app-keenicon>
          </span>
          <span class="menu-title">Dark</span>
        </a>
      </div>

      <!-- System -->
      <div class="menu-item px-3 my-0">
        <a class="menu-link px-3 py-2"
           [ngClass]="{'active': menu === 'system'}"
           (click)="switchTheme('system')">
          <span class="menu-icon">
            <app-keenicon name="screen" class="fs-3"></app-keenicon>
          </span>
          <span class="menu-title">System</span>
        </a>
      </div>

    </ng-container>

  </div>

</div>
<!--end::Theme mode-->


<!--begin::User menu-->
<div class="app-navbar-item" [ngClass]="itemClass">
  <!--begin::Menu wrapper-->
  <div class="cursor-pointer symbol" [ngClass]="userAvatarClass" data-kt-menu-trigger="{default: 'click'}" data-kt-menu-attach="parent" data-kt-menu-placement="bottom-end">
    <img [src]="getUserAvatar()" [alt]="user?.full_name || user?.name || 'Usuario'" />
  </div>
  <app-user-inner data-kt-menu='true'></app-user-inner>
  <!--end::Menu wrapper-->
</div>
<!--end::User menu-->

<!--begin::Header menu toggle-->
<ng-container *ngIf="appHeaderDefaulMenuDisplay">
  <div class="app-navbar-item d-lg-none ms-2 me-n3" title="Show header menu">
    <div class="btn btn-icon btn-active-color-primary w-35px h-35px" id="kt_app_header_menu_toggle">
      <app-keenicon name="element-4" class="fs-1" [ngClass]="btnIconClass"></app-keenicon>
    </div>
  </div>
</ng-container>
<!--end::Header menu toggle-->